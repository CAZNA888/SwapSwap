# Инструкция по обновлению префаба карточки

## Что изменилось

Логика создания рамок изменена:
- **Старая:** Рамка масштабировалась и размещалась по краям
- **Новая:** Рамка 368×512 разрезается по **двум диагоналям** на **4 треугольника**

## Диагонали разрезания

1. **Диагональ 1:** От правого верхнего угла (width, height) до левого нижнего (0, 0)
2. **Диагональ 2:** От левого верхнего угла (0, height) до правого нижнего (width, 0)

## 4 треугольника

- **TopBorder** - верхний треугольник (выше обеих диагоналей)
- **BottomBorder** - нижний треугольник (ниже обеих диагоналей)
- **LeftBorder** - левый треугольник (левее центра, между диагоналями)
- **RightBorder** - правый треугольник (правее центра, между диагоналями)

---

## Если у вас УЖЕ ЕСТЬ префаб

### Вариант 1: Обновить существующий префаб (рекомендуется)

1. Откройте префаб для редактирования:
   - Найдите префаб `PuzzlePiece` в `Assets/Prefabs/`
   - Дважды кликните на него (откроется Prefab Mode)
   - Или выберите его и нажмите кнопку **Open Prefab** в Inspector

2. В Prefab Mode:
   - Выберите корневой объект `PuzzlePiece`
   - Найдите компонент `Card Prefab Builder`
   - Убедитесь, что спрайты установлены:
     - `Card Back Sprite` - установлен
     - `Border Sprite` - установлен

3. Удалите старые рамки:
   - Правой кнопкой на `Card Prefab Builder`
   - Выберите **3. Удалить рамки**

4. Создайте новые рамки:
   - Правой кнопкой на `Card Prefab Builder`
   - Выберите **2. Создать рамки**
   - Рамки будут созданы из треугольников

5. Сохраните префаб:
   - Нажмите кнопку **Open Prefab** еще раз (закроет Prefab Mode)
   - Или просто закройте окно Prefab Mode
   - Изменения сохранятся автоматически

### Вариант 2: Пересоздать префаб с нуля

1. Удалите старый префаб из `Assets/Prefabs/` (опционально)
2. Следуйте инструкции из `CARD_PREFAB_CREATION_GUIDE.md`
3. Создайте новый префаб с новой логикой

---

## Если префаба еще НЕТ

Следуйте инструкции `CARD_PREFAB_CREATION_GUIDE.md` - там все описано с нуля.

---

## Проверка результата

После обновления префаба:

1. В Scene view вы должны видеть:
   - Карточку (CardBack спрайт)
   - 4 треугольника рамки, которые вместе покрывают всю карточку
   - Треугольники должны точно совпадать по диагоналям

2. В Hierarchy структура:
   ```
   PuzzlePiece
   └── BorderContainer
       ├── TopBorder (треугольник)
       ├── BottomBorder (треугольник)
       ├── LeftBorder (треугольник)
       └── RightBorder (треугольник)
   ```

3. Проверьте в Console:
   - Должно быть сообщение: "✓ Рамки созданы из треугольников"
   - Не должно быть ошибок

---

## Важно

- Рамка должна быть **368×512 пикселей** (такая же как CardBack)
- `Pixels Per Unit` должен быть **100** для обоих спрайтов
- Рамка разрезается программно по диагоналям - не нужно резать спрайт вручную

---

## Если что-то не работает

1. Проверьте размеры спрайтов:
   - Правой кнопкой → **Проверить размеры спрайтов**
   - Смотрите в Console

2. Убедитесь, что Border Sprite установлен

3. Удалите и создайте рамки заново:
   - **3. Удалить рамки** → **2. Создать рамки**

